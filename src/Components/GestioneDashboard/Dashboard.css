.db-root{
  /* -- COMMENTO -- Altezze/larghezze di default se non fornite dal tema */
  --appbar-height: var(--appbar-height, 56px);
  --sidebar-width: var(--sidebar-width, 260px);

  /* -- COMMENTO -- Alias verso i token del tema con fallback sicuri */
  --surface: var(--surface, var(--card-bg, var(--bg)));
  --surface-2: var(--surface-2, var(--surface));
  --border: var(--border, var(--border-weak, transparent));
  --shadow: var(--shadow, var(--elevation-1));

  --muted: var(--muted, var(--text-muted, inherit));

  /* -- COMMENTO -- Stati e colori grafici agganciati al tema */
  --positive: var(--positive, var(--accent));
  --negative: var(--negative, var(--accent-2, var(--accent)));
  --chart-current: var(--chart-current, var(--accent));
  --chart-previous: var(--chart-previous, var(--accent-2, var(--accent)));
}

/* -- LAYOUT ROOT -- */
.db-root { min-height: 100vh; display: flex; flex-direction: column; }

/* -- APP BAR -- */
.db-appbar {
  position: sticky; top: 0; z-index: 20; height: var(--appbar-height);
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 12px; border-bottom: 1px solid var(--border);
  background: var(--surface); box-shadow: var(--shadow);
}
.db-appbar__left, .db-appbar__right { display: flex; align-items: center; gap: 8px; }
.db-logo { font-weight: 800; font-size: 1.1rem; }

/* -- SHELL -- */
.db-shell { display: grid; grid-template-columns: var(--sidebar-width) 1fr; gap: 16px; flex: 1; padding: 16px; }
.db-shell--no-aside { grid-template-columns: 1fr; }

/* -- SIDEMENU -- */
.db-sidemenu {
  position: sticky; top: calc(var(--appbar-height) + 16px); align-self: start;
  height: max-content; border: 1px solid var(--border); border-radius: 14px;
  background: var(--surface); box-shadow: var(--shadow); padding: 12px;
}

/* -- MENU -- */
.db-nav__section { font-size: 0.85rem; color: var(--muted); margin-bottom: 8px; }
.db-nav__list { list-style: none; margin: 0; padding: 0; display: grid; gap: 6px; }
.db-nav__item {
  border: 1px solid var(--border); border-radius: 12px; padding: 10px 12px;
  background: var(--surface-2); cursor: pointer; user-select: none;
  transition: background .18s ease, box-shadow .18s ease, outline-color .18s ease;
}
.db-nav__item:hover { background: var(--surface); }
.db-nav__item:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
.db-nav__item--active { box-shadow: inset 0 0 0 2px var(--accent); }

/* -- COMMENTO -- Menu semplice usato in Dashboard.jsx */
.db-menu { list-style: none; margin: 0; padding: 0; display: grid; gap: 8px; }
.db-menu li { padding: 8px 10px; border: 1px solid var(--border); border-radius: 10px; background: var(--surface-2); }

/* -- VERSIONE COMPATTA -- */
/* quando si rimpicciolisce che mi cambia il box in basso */
.db-menu-box {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 14px; box-shadow: var(--shadow); padding: 12px;
}

/* -- CONTENT -- */
.db-content { display: flex; flex-direction: column; gap: 16px; }

/* -- GRID -- */
.db-grid { display: grid; gap: 16px; }
.db-grid__row { display: grid; gap: 16px; grid-template-columns: repeat(12, 1fr); }
.db-col-9 { grid-column: span 9; }
.db-col-3 { grid-column: span 3; }
.db-col-6 { grid-column: span 6; }

/* -- CARD / PANEL -- */
.db-card {
  grid-column: span 3;
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 16px; box-shadow: var(--shadow); padding: 14px;
  transition: transform .15s ease, box-shadow .18s ease;
}
.db-card:hover { transform: translateY(-1px); }
.db-card__title { font-size: 0.9rem; color: var(--muted); }
.db-card__value { font-size: 1.6rem; font-weight: 800; margin-top: 2px; }
.db-card__hint  { font-size: 0.85rem; color: var(--muted); margin-top: 2px; }
.db-card--highlight { box-shadow: inset 0 0 0 2px var(--accent); }

.db-panel {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 16px; box-shadow: var(--shadow); padding: 14px; min-height: 240px;
  transition: transform .15s ease, box-shadow .18s ease;
}
.db-panel:hover { transform: translateY(-1px); }

/* -- COMMENTO -- Titoli e metriche per le panel-statistiche usate in Dashboard.jsx */
.db-panel__title { font-size: 0.95rem; font-weight: 600; color: var(--muted); margin-bottom: 6px; }
.db-metric { font-size: 1.6rem; font-weight: 800; }
.db-hint { font-size: 0.85rem; color: var(--muted); margin-top: 4px; }

/* -- Prima riga statistiche: altezza minima delle card */
.db-grid__row:first-child .db-panel { min-height: 112px; }

/* -- TABLE -- */
.db-table {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 16px; box-shadow: var(--shadow); padding: 0; overflow: hidden;
}

/* -- COMMENTO -- Abilita scroll orizzontale su viewport stretti */
.db-table { overflow-x: auto; }
.db-table__table { width: 100%; border-collapse: collapse; min-width: 760px; }

.db-table__th, .db-table__td { padding: 10px 12px; border-bottom: 1px solid var(--border); text-align: left; }
.db-table__thead .db-table__th { background: var(--surface-2); font-weight: 600; }
.db-table__tbody tr:nth-child(odd) .db-table__td { background: var(--surface-2); }
.status--ok  { color: var(--positive); }
.status--bad { color: var(--negative); }

/* -- COMMENTO -- Legenda grafico */
.db-legend{ display:flex; align-items:center; gap:16px; padding: 4px 0 8px; }
.db-legend .legend{ width:14px; height:14px; display:inline-block; border-radius:3px; }
.db-legend .legend.current{ background: var(--chart-current); }
.db-legend .legend.previous{ background: var(--chart-previous); }

/* -- RESPONSIVE -- */
@media (max-width: 1024px) {
  .db-col-9, .db-col-3, .db-col-6 { grid-column: span 12; }
}

@media (max-width: 640px) {
  .db-menu-box .db-nav__list {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 8px;
  }
  .db-menu-box .db-nav__item { box-sizing: border-box; width: 100%; min-width: 0; }

  .db-menu-box .db-nav__item:nth-child(1) { grid-column: 1; grid-row: 1; }
  .db-menu-box .db-nav__item:nth-child(2) { grid-column: 1; grid-row: 2; }
  .db-menu-box .db-nav__item:nth-child(3) { grid-column: 1; grid-row: 3; }
  .db-menu-box .db-nav__item:nth-child(4) { grid-column: 2; grid-row: 1; }
  .db-menu-box .db-nav__item:nth-child(5) { grid-column: 2; grid-row: 2; }
  .db-menu-box .db-nav__item:nth-child(6) { grid-column: 2; grid-row: 3; }
}

/* -- MOTION SAFE --*/
@media (prefers-reduced-motion: reduce) {
  .db-card, .db-panel, .db-nav__item { transition: none; }
}

/* -- ACCESSIBILITÃ€: focus visibile coerente */
.db-nav__item:focus-visible,
.db-card:focus-visible,
.db-panel:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}
